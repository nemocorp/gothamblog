## -*- coding: utf-8 -*-
<%inherit file="base.tmpl"/>
<%namespace name="comments" file="comments_helper.tmpl"/>
<%namespace name="ui" file="crumbs.tmpl" import="bar"/>
<%block name="sourcelink"></%block>

<%block name="content">
    <div class="well">
        <h2><a href="/galleries">Les Belles Photos du Blog</a></h2>
        %if text:
        <p>
            ${text}
        </p>
        %endif
    </div>
    <ul>
    % for folder in folders:
        <a href="${folder}"><i class="icon-folder-open"></i>&nbsp;${folder}</a>
    % endfor
    </ul>
    
    <div class="row">
        <div id="gallery_container"></div>
    </div>
    <noscript>
    <ul class="thumbnails">
        %for image in photo_array:
            <li><a href="${image['url']}" class="thumbnail image-reference" title="${image['title']}">
                <img src="${image['url_thumb']}" alt="${image['title']}"/></a>
        %endfor
    </ul>
    </noscript>

%if enable_comments:
    ${comments.comment_form(None, permalink, title)}
%endif
</%block>


<%block name="extra_js">
<script>
jsonContent = ${photo_array_json};
for (i in jsonContent) {
    img = $("<img />").attr({
        'src': jsonContent[i].url_thumb,
    });
    link = $( "<a></a>").attr({
        'href': jsonContent[i].url,
        'class': 'image-reference'
    });

    div = $("<div />").addClass('gallery-thumb col-md-2 img-rounded').attr({
        'title': jsonContent[i].title,
        'data-toggle': "tooltip",
        'style': 'background-image: url(\''+jsonContent[i].url_thumb+'\');'
    });
    link.append(img); 
    div.append(link);
    div.hover(div.tooltip());
    $('#gallery_container').append(div);
};

$("a.image-reference").colorbox({rel:"gal", maxWidth:"100%",maxHeight:"100%",scalePhotos:true});
</script>
</%block>
